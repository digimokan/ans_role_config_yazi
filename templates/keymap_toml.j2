# vim: set filetype=toml:
# ANSIBLE-MANAGED CONFIGURATION FILE
# Ref:
#  https://yazi-rs.github.io/docs/configuration/keymap

[mgr]

keymap = [
  # General / Navigation
  { on = {{ yazi_keymap_escape_or_cancel }}, run = "escape --all", desc = "Cancel or escape current action or mode" },
  { on = {{ yazi_keymap_keymaps_help_menu }}, run = "help", desc = "Show keymaps help menu" },
  { on = {{ yazi_keymap_quit }}, run = "quit", desc = "Quit yazi" },
  { on = {{ yazi_keymap_refresh }}, run = ["arrow 1", "leave", "enter", "arrow -1", "escape --select"], desc = "Refresh file listing" },
  { on = {{ yazi_keymap_nav_down_one_row }}, run = "arrow 1", desc = "Nav down one row" },
  { on = {{ yazi_keymap_nav_up_one_row }}, run = "arrow -1", desc = "Nav up one row" },
  { on = {{ yazi_keymap_nav_last_row }}, run = "arrow bot", desc = "Nav to last row" },
  { on = {{ yazi_keymap_nav_first_row }}, run = "arrow top", desc = "Nav to first row" },
  { on = {{ yazi_keymap_nav_right }}, run = "enter", desc = "Nav right" },
  { on = {{ yazi_keymap_nav_left }}, run = "leave", desc = "Nav left" },
  { on = {{ yazi_keymap_nav_prev_dir_history }}, run = "back", desc = "Prev dir in history" },
  { on = {{ yazi_keymap_nav_next_dir_history }}, run = "forward", desc = "Next dir in history" },

  # Preview Window
  { on = {{ yazi_keymap_scroll_prev_window_down }}, run = "seek 10", desc = "Scroll preview window down" },
  { on = {{ yazi_keymap_scroll_prev_window_up }}, run = "seek -10", desc = "Scroll preview window up" },
  { on = {{ yazi_keymap_show_prev_window_file_info }}, run = "spot", desc = "Show preview window file info" },

  # Jumps
  { on = {{ yazi_keymap_jump_to_root_dir }}, run = "cd \"{{ yazi_root_dir }}\"", desc = "Go to root dir" },
  { on = {{ yazi_keymap_jump_to_mnt_dir }}, run = "cd \"{{ yazi_mount_dir }}\"", desc = "Go to mnt dir" },
  { on = {{ yazi_keymap_jump_to_media_dir }}, run = "cd \"{{ yazi_media_dir }}\"", desc = "Go to media dir" },
  { on = {{ yazi_keymap_jump_to_fileserver_dir }}, run = "cd \"{{ yazi_fileserver_dir }}\"", desc = "Go to fileserver dir" },
  { on = {{ yazi_keymap_jump_to_user_home_dir }}, run = "cd \"{{ yazi_user_home_dir }}\"", desc = "Go to home dir" },
  { on = {{ yazi_keymap_jump_to_user_documents_dir }}, run = "cd \"{{ yazi_user_documents_dir }}\"", desc = "Go to documents dir" },
  { on = {{ yazi_keymap_jump_to_user_desktop_dir }}, run = "cd \"{{ yazi_user_desktop_dir }}\"", desc = "Go to desktop dir" },
  { on = {{ yazi_keymap_jump_to_user_download_dir }}, run = "cd \"{{ yazi_user_download_dir }}\"", desc = "Go to downloads dir" },
  { on = {{ yazi_keymap_jump_to_user_music_dir }}, run = "cd \"{{ yazi_user_music_dir }}\"", desc = "Go to music dir" },
  { on = {{ yazi_keymap_jump_to_user_pictures_dir }}, run = "cd \"{{ yazi_user_pictures_dir }}\"", desc = "Go to pictures dir" },
  { on = {{ yazi_keymap_jump_to_user_videos_dir }}, run = "cd \"{{ yazi_user_videos_dir }}\"", desc = "Go to videos dir" },
  { on = {{ yazi_keymap_jump_to_user_trash_dir }}, run = "cd \"{{ yazi_user_trash_dir }}\"", desc = "Go to trash dir" },
  { on = {{ yazi_keymap_jump_to_user_devel_dir }}, run = "cd \"{{ yazi_user_devel_dir }}\"", desc = "Go to devel dir" },
  {% for keymap in yazi_extra_keymaps_jump_to_dir -%}
  {{ "{ on = " }}{{ keymap.key_presses }}{{ ", run = \"cd \\\"" }}{{ keymap.dir }}{{ "\\\"\", desc = \"" }}{{ keymap.descrip }}{{ "\" }," }}
  {% endfor %}

  # Selection
  { on = {{ yazi_keymap_toggle_select_file }}, run = ["toggle", "arrow 1"], desc = "Select/deselect file" },
  { on = {{ yazi_keymap_toggle_select_all_files }}, run = "toggle_all --state=on", desc = "Select all files" },
  { on = {{ yazi_keymap_toggle_deselect_all_files }}, run = ["escape --select", "unyank"], desc = "Deselect all files" },
  { on = {{ yazi_keymap_visual_mode }}, run = "visual_mode", desc = "Enter visual select mode" },

  # Open File(s) And Directories
  { on = {{ yazi_keymap_open_file }}, run = "open", desc = "Open file" },
  { on = {{ yazi_keymap_open_file_interactive }}, run = "open --interactive", desc = "Open file (interactive)" },
  { on = {{ yazi_keymap_open_dir_in_term }}, run = "shell --orphan '{{ yazi_start_term_emulator }} {{ yazi_term_arg_set_dir }}\"${PWD}\"'", desc = "Open current dir in terminal emulator" },

  # Yank/Cut/Delete File(s)
  { on = {{ yazi_keymap_yank_file }}, run = ["yank", "escape --select"], desc = "Yank file(s)" },
  { on = {{ yazi_keymap_cut_file }}, run = ["yank --cut", "escape --select"], desc = "Cut file(s)" },
  { on = {{ yazi_keymap_paste_file }}, run = ["paste", "escape --select"], desc = "Paste cut/yanked file(s)" },
  { on = {{ yazi_keymap_paste_symlink_to_file_rel_path }}, run = ["link --relative", "escape --select"], desc = "Paste relative symlink to yanked file(s)" },
  { on = {{ yazi_keymap_paste_symlink_to_file_abs_path }}, run = ["link", "escape --select"], desc = "Paste absolute symlink to yanked file(s)" },
  { on = {{ yazi_keymap_trash_file }}, run = ["shell '{{ yazi_gnu_coreutils_mv_cmd }} --backup=numbered \"${@}\" \"{{ yazi_user_trash_dir }}/\"'", "escape --select"], desc = "Trash file(s)" },
  { on = {{ yazi_keymap_delete_file }}, run = ["remove --permanently", "escape --select"], desc = "Delete file(s)" },
  { on = {{ yazi_keymap_copy_file_path }}, run = "copy path", desc = "Copy file path" },

  # Create/Rename
  { on = {{ yazi_keymap_create_file }}, run = "create", desc = "Create file" },
  { on = {{ yazi_keymap_create_directory }}, run = "create --dir", desc = "Create directory" },
  { on = {{ yazi_keymap_rename_file }}, run = "rename --empty=all", desc = "Rename file(s)" },
  { on = {{ yazi_keymap_rename_filename_keep_ext }}, run = "rename --empty=stem --cursor=start", desc = "Rename file(s), keep extension(s)" },
  { on = {{ yazi_keymap_rename_filename_cursor_start }}, run = "rename --cursor=start", desc = "Rename file(s), cursor at filename start" },
  { on = {{ yazi_keymap_rename_filename_cursor_end }}, run = "rename --cursor=before_ext", desc = "Rename file(s), cursor at filename end" },
  { on = {{ yazi_keymap_rename_filename_cursor_ext }}, run = "rename --cursor=end", desc = "Rename file(s), cursor at extension end" },
  { on = {{ yazi_keymap_change_file_permissions }}, run = "shell --interactive --cursor=6 'chmod  \"${@}\"'", desc = "Change file(s) permissions" },

  # Files-Listing Stats
  { on = {{ yazi_keymap_show_files_sizes }}, run = "linemode size", desc = "Show files sizes" },
  { on = {{ yazi_keymap_show_files_mtimes }}, run = "linemode mtime", desc = "Show files mtimes" },
  { on = {{ yazi_keymap_show_files_create_times }}, run = "linemode btime", desc = "Show files creation times" },
  { on = {{ yazi_keymap_show_files_perms }}, run = "linemode permissions", desc = "Show files permissions" },
  { on = {{ yazi_keymap_show_files_owners }}, run = "linemode owner", desc = "Show files owners" },

  # Files-Listing Sort
  { on = {{ yazi_keymap_sort_files_by_names }}, run = "sort alphabetical", desc = "Sort files by names" },
  { on = {{ yazi_keymap_sort_files_by_sizes }}, run = "sort size", desc = "Sort files by sizes" },
  { on = {{ yazi_keymap_sort_files_by_mtimes }}, run = "sort mtime", desc = "Sort files by mtimes" },
  { on = {{ yazi_keymap_sort_files_by_create_times }}, run = "sort btime", desc = "Sort files by creation times" },
  { on = {{ yazi_keymap_sort_files_by_perms }}, run = "sort permissions", desc = "Sort files by permissions" },
  { on = {{ yazi_keymap_sort_files_by_owners }}, run = "sort owner", desc = "Sort files by owners" },

  # Search
  { on = {{ yazi_keymap_find_files_in_current_dir }}, run = "find --smart", desc = "Find files in current dir" },
  { on = {{ yazi_keymap_next_found_file }}, run = "find_arrow", desc = "Next found file" },
  { on = {{ yazi_keymap_prev_found_file }}, run = "find_arrow --previous", desc = "Previous found file" },
  { on = {{ yazi_keymap_find_files_recursive }}, run = "search", desc = "Find files recursively" },
  { on = {{ yazi_keymap_find_files_and_filter }}, run = "filter", desc = "Find files and filter" },
]

[tasks]

keymap = [
  { on = {{ yazi_keymap_show_tasks_window }}, run = "show", desc = "Show tasks window" },
  { on = {{ yazi_keymap_keymaps_help_menu }}, run = "help", desc = "Show tasks keymaps help menu" },
  { on = {{ yazi_keymap_nav_down_one_row }}, run = "arrow 1", desc = "Nav down one row" },
  { on = {{ yazi_keymap_nav_up_one_row }}, run = "arrow -1", desc = "Nav up one row" },
  { on = {{ yazi_keymap_tasks_window_cancel_task }}, run = "cancel", desc = "Cancel task" },
  { on = {{ yazi_keymap_tasks_window_show_log }}, run = "inspect", desc = "Display task log" },
]

[spot]

keymap = [
  { on = {{ yazi_keymap_show_prev_window_file_info }}, run = "close", desc = "Close preview window file info" },
  { on = {{ yazi_keymap_escape_or_cancel }}, run = "close", desc = "Close preview window file info" },
]

